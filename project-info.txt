locals {
  project_title = "ğŸ”’ Secure EC2 to S3 Communication via Private VPC Endpoint"
  author        = "ğŸ‘¨â€ğŸ’» Sanket Tambe"

  description = <<DESCRIPTION
This Terraform project provisions a secure and scalable AWS infrastructure where private EC2 instances 
access an S3 bucket without touching the public internet. It uses a VPC Gateway Endpoint to ensure 
traffic remains within AWS's internal network â€” perfect for production-grade systems.
DESCRIPTION

  main_features = [
    "ğŸŒ Custom VPC with public and private subnets (multi-AZ)",
    "ğŸ› ï¸ EC2 instance with no public IP in private subnet",
    "ğŸ” IAM role with least privilege to access S3 bucket",
    "ğŸšª VPC Gateway Endpoint for secure S3 access",
    "ğŸ“¦ S3 bucket name provided dynamically via variable",
    "âŒ No NAT Gateway required for S3 access",
    "âœ… Fully automated using Terraform"
  ]

  terraform_files = [
    "ğŸ“„ provider.tf â€“ AWS provider configuration",
    "ğŸ“„ vpc.tf â€“ VPC, subnets, route tables, IGW, NAT GW",
    "ğŸ“„ ec2.tf â€“ Public and private EC2 instances",
    "ğŸ“„ s3.tf â€“ S3 bucket and VPC endpoint resources",
    "ğŸ“„ variables.tf â€“ Input variables (bucket, region, etc)",
    "ğŸ“„ outputs.tf â€“ Shows VPC ID, EC2 IPs, S3 bucket name"
  ]


   ## ğŸ“¦ Resources Used

| Resource Type            | Terraform Resource Name                  	      | Purpose                                      |
|--------------------------|--------------------------------------------------|----------------------------------------------|
| VPC                      | `aws_vpc.secure_vpc`                     	      | Custom virtual private cloud                 |
| Subnet                   | `aws_subnet.app_subnet`                          | Private subnet for EC2                       |
| Route Table              | `aws_route_table.app_route_table`        	      | Controls subnet routing                      |
| Route Association        | `aws_route_table_association.subnet_route_assoc` | Links subnet to route table                  |
| VPC Endpoint             | `aws_vpc_endpoint.s3_gateway_endpoint`   	      | Enables private access to S3                 |
| IAM Role                 | `aws_iam_role.ec2_to_s3_role`       	      | Grants EC2 permissions to access S3          |
| IAM Policy               | `aws_iam_role_policy.s3_read_policy`	      | Defines S3 read-only access                  |
| Instance Profile         | `aws_iam_instance_profile.ec2_iam_profile`       | Binds IAM role to EC2 instance               |
| EC2 Instance             | `aws_instance.web_instance`                      | Amazon Linux instance in private subnet      |



  run_steps = <<STEPS
ğŸš€ HOW TO DEPLOY

1ï¸âƒ£ Open your terminal (Git Bash or similar)  
2ï¸âƒ£ Navigate to the project directory:  
    cd /path/to/project  
3ï¸âƒ£ Generate SSH key (if needed):  
    ssh-keygen  
    cat ~/.ssh/id_ed25519.pub  

4ï¸âƒ£ Deploy the infrastructure:  
    terraform init  
    terraform plan  
    terraform apply -var="bucket_name=your-bucket-name"
STEPS

  git_instructions = <<GIT
ğŸ“¦ GITHUB INTEGRATION

1ï¸âƒ£ Initialize Git in your project:  
    git init  

2ï¸âƒ£ Push to GitHub:  
    git clone https://github.com/<your-username>/secure-ec2-s3-project.git  
    git add .  
    git commit -m "Initial secure EC2 to S3 project setup"  
    git push origin main
GIT
}


